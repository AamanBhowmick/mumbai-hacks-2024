{% extends "layout.html" %} {% block body %}

<!-- Include Intro.js CSS -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/4.3.0/introjs.min.css"
/>

<!-- Landing Page -->
<header class="header" id="home">
  <div class="container">
    <div class="header-content">
      <div class="text-container">
        <h1 class="hero-title">
          REDEFINING MOVIE TRAILERS: <br /><span>AI-GENERATED FOR YOU</span> {%
          if user %}{{user}}{% endif %}
        </h1>
        <p class="subtext">
          Why settle for a single trailer that doesnâ€™t highlight everyone's
          favorite moments? With AI, we can generate personalized movie trailers
          that cater to different tastes and demographics. Experience the scenes
          that matter most to you.
        </p>
        <a href="/upload" class="btn"
          >Start Now &nbsp;<i class="fa-solid fa-angles-right"></i
        ></a>
      </div>
      <div class="image-container">
        <img
          src="https://www.vimp.com/wp-content/uploads/2024/01/video-production-ki-ai.jpg"
          alt="Success Image"
        />
      </div>
    </div>
  </div>
</header>

<section class="services" id="services">
  <div class="container cont-second">
    <div class="service-wrap">
      <div class="service-img">
        <img
          src="https://cdn.prod.website-files.com/60d04919d1bfb15197ff937e/6609f8d1783e3c6b959e7d9c_uc.jpeg"
          alt="service img"
        />
      </div>
      <div class="service-content">
        <p class="title">What we do?</p>
        <ul class="service-points">
          <li>
            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis, aut!
          </li>
          <li>
            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis, aut!
          </li>
          <li>
            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis, aut!
          </li>
          <li>
            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quis, aut!
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="choose" id="choose">
  <div class="container cont-third">
    <p class="title">Why Choose Us?</p>
    <div class="choose-wrap">
      {%for i in range(4)%}
      <div class="choose-card">
        <p class="choose-icon"><i class="fa-solid fa-fire"></i></p>
        <p class="choose-desc">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Optio hic
          nihil blanditiis perferendis architecto adipisci quam, voluptatibus
          repellat voluptas veniam facilis, vitae ullam tenetur officia deserunt
          minima quisquam debitis impedit.
        </p>
      </div>
      {%endfor%}
    </div>
  </div>
</section>

<!-- Include Intro.js JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/4.3.0/intro.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Check if the tour has already been completed
    if (!sessionStorage.getItem("introCompleted")) {
      // Start the Intro.js tour
      var intro = introJs();

      // Configure options
      intro.setOptions({
        steps: [
          {
            intro:
              "Welcome to our website! Here we redefine movie trailers with AI-generated content.",
          },
          {
            element: document.querySelector(".subtext"),
            intro: "Discover personalized trailers that cater to your taste.",
          },
          {
            element: document.querySelector(".btn"),
            intro: "Click here to start creating your personalized trailers.",
            position: "bottom",
          },
          {
            element: ".service-wrap",
            intro:
              "Here are the services we provide to enhance your experience.",
          },
          {
            element: ".choose-card",
            intro: "This is a unique feature that sets us apart.",
          },
          {
            element: ".title",
            intro: "Learn why you should choose our services.",
          },
          {
            element: document.querySelector(".btn"),
            intro: "You can click this button to start now!",
            position: "top",
          },
        ],
        showButtons: true,
        showProgress: true,
        exitOnOverlayClick: false,
        nextLabel: "Next",
        prevLabel: "Previous",
        skipLabel: "Skip",
        doneLabel: "Done",
      });

      intro.onexit(function () {
        // Set a flag in sessionStorage when the tour ends
        sessionStorage.setItem("introCompleted", "true");

        // Construct the URL based on the journey
        const uploadUrl = "/upload?view=search"; // URL for the Intro.js journey
        const currentUrl = document.querySelector(".btn").getAttribute("href"); // Original button URL

        // Change the button URL based on whether the tour was completed
        document.querySelector(".btn").setAttribute("href", uploadUrl);
        document.querySelector(".btn").click(); // Trigger the click event
        document.querySelector(".btn").setAttribute("href", currentUrl); // Reset URL
      });

      // Start the tour
      intro.start();
    }
  });
</script>

{% endblock body %}
